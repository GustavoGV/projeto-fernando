<html>
    <head>
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        <meta charset="utf-8">
        <title></title>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <style>
        body {
            margin: 40px 0 0 0;
            padding: 0;
            background-color: #EEE;
            text-align: left;
        }
        table, td {
            
            border: 2px solid black;
          
          }
          #parame {
            position: absolute;
                top: 100px;
                left: 300px;
          }
          #log {
            position: absolute;
                top: 500px;
                left: 300px;
          }
          #enviarcus { 
            position: absolute;
                top: 650px;
                left: 50px;
          }
          #custos { 
            position: absolute;
                top: 50px;
                left: 900px;
          }
        </style>
        <table id="myTable">
            <tr>
                <td>Players</td>
                <td>Caixa</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            <tr>
                <td>PlayerX</td>
                <td>250</td>
            </tr>
            
        </table>
    <body>
    <script src="/socket.io/socket.io.js"></script>  
            <div id="admin">
                <div id="parame">
                    Peso do Preco unitario
                    <input type="text" id="" value="30%"><br>
                    Peso do Investimento em propaganda de servico
                    <input type="text" id="" value="12%"><br>
                    Peso do investimento em propaganda institucional
                    <input type="text" id="" value="10%"><br>
                    Peso do numero de distrivuidores
                    <input type="text" id="" value="9%"><br>
                    Peso da equipe de vendas/promocao
                    <input type="text" id="" value="7%"><br>
                    Peso da comissao aos vendedores/ promotores
                    <input type="text" id="" value="6%"><br>
                    Peso do numero de PAS
                    <input type="text" id="" value="9%"><br>
                    Peso da pesquisa de mercado
                    <input type="text" id="" value="5%"><br>
                    Numero de contratos oferecidos no turno
                    <input type="text" id="" value="11500"><br>

                    
                    <button type="button" onclick="parareventox()">Enviar paramentros</button>
                </div> 
                <div id="custos">
                    147
                    <input type="text" value="11500"><br>
        148
        <input type="text" value="11500"><br>
        149
        <input type="text" value="11500"><br>
        157
        <input type="text" value="11500"><br>
        158
        <input type="text" value="11500"><br>
        159
        <input type="text" value="11500"><br>
        257
        <input type="text" value="11500"><br>
        258
        <input type="text" value="11500"><br>
        259
        <input type="text" value="11500"><br>
        267
        <input type="text" value="11500"><br>
        268
        <input type="text" value="11500"><br>
        269
        <input type="text" value="11500"><br>
        347
        <input type="text" value="320"><br>
        348
        <input type="text" value="320"><br>
        349
        <input type="text" value="320"><br>
        357
        <input type="text" value="320"><br>
        358
        <input type="text" value="320"><br>
        359
        <input type="text" value="320"><br>
        367
        <input type="text" value="320"><br>
        368
        <input type="text" value="320"><br>
        369
        <input type="text" value="320"><br>
        <br></br>
        <button type="button" onclick="parareventox()">Enviar custos unitarios padrao</button>
                </div>
            

              
                <div id="log">
                    <input type="text" value="USUARIO" id="usuario"><br>
                    <input type="text" value="SENHA" id="senha"><br>
                    <button type="button" onclick="login()">Clique para fazer login</button><br>
                </div>

                <br>
                
    
            </div>
    </div>
        <script>
            const socket = io()
            let game
            //const scoreTable = document.getElementById('score-table')
            //const gameCanvas = document.getElementById('game-canvas')
            //let totalPlayersCount = ''
            //const collectFruitAudio = new Audio('collect.mp3')
            //const collect100FruitAudio = new Audio('100-collect.mp3')
            
            socket.on('connect', () => {
                const playerId = socket.id
                console.log('> Connected to server (id: ' + socket.id )
            })
            function eventox() {
                let valor = document.getElementById("valorx").value;
                socket.emit('mudar-dolar-adm', valor)
                }
            function login() {
                let valor1 = document.getElementById("usuario").value
                let valor2 = document.getElementById("senha").value
                let valor = [valor1, valor2]
                socket.emit('login-adm', valor)
                document.getElementById("usuario").value = ''
                document.getElementById("senha").value = ''

            }
            function eventok() {
                socket.emit('lazer')
            }
            function parareventok() {
                socket.emit('nlazer')
            }
            socket.on('login-negado', (id) => {
                alert('login_negado (para o id de conexao: ' + id + ')')
            })
            socket.on('login-aprovado', () => {
                alert('Login realizado com sucesso')
            })
            socket.on('acesso-negado', (id) => {
                alert('acesso negado (para o id de conexao: ' + id + ') FACA LOGIN!')
            })
            socket.on('alerta', (alerta) => {
                alert(alerta)
            })

            socket.on('disconnect', () => {
                console.log('> Disconnected')
                
            })
            /*
            socket.on('player-update', (player) => {
                game.players[player.socketId] = player.newState
            })

            socket.on('update-player-score', (score) => {
                game.players[socket.id].score = score
                updateScoreTable()
            })

            socket.on('player-remove', (socketId) => {
                delete game.players[socketId]
            })

            socket.on('fruit-add', (fruit) => {
                game.fruits[fruit.fruitId] = {
                    x: fruit.x,
                    y: fruit.y
                }
            })

            socket.on('fruit-remove', ({fruitId, score}) => {
                delete game.fruits[fruitId]
                multipleOf100Remainder = score % 100

                if (multipleOf100Remainder !== 0) {
                    collectFruitAudio.pause()
                    collectFruitAudio.currentTime = 0
                    collectFruitAudio.play().catch(console.log)
                }

                if (multipleOf100Remainder === 0 && score !== 0) {
                    collectFruitAudio.pause()
                    collect100FruitAudio.pause()
                    collect100FruitAudio.currentTime = 0
                    collect100FruitAudio.play().catch(console.log)
                }

                updateScoreTable()
            })

            socket.on('concurrent-connections', (concurrentConnections) => {
                totalPlayersCount = concurrentConnections
                updateScoreTable()
            })

            let crazyModeInterval
            socket.on('start-crazy-mode', () => {
                crazyModeInterval = setInterval(() => {
                    const randomKey = 37 + Math.floor(Math.random()*4)
                    console.log(randomKey)
                    const event = new KeyboardEvent('keydown', {
                        keyCode: randomKey,
                        which: randomKey
                    })

                    document.dispatchEvent(event);
                }, 150)
            })

            socket.on('stop-crazy-mode', () => {
                clearInterval(crazyModeInterval)
            })
            */
            //document.addEventListener('keydown', throttledKeydown)

            /* ADMIN */

            /*
            function eventox() {
                const interval = document.getElementById('valorx').value
                console.log(interval)
                socket.emit('admin-start-fruit-game', interval)
            }

            function parareventox() {
                socket.emit('admin-stop-fruit-game')
            }

            function eventok() {
                socket.emit('admin-start-crazy-mode')
            }

            function parareventok() {
                socket.emit('admin-stop-crazy-mode')
            }

            function login() {
                let user = promt('seu usuario:')
                let senha = prompt('sua senha:')
                let credenciais = [user, senha]
                socket.emit('admin-clear-scores', credenciais)
            }

            function sety() {
                const maxConcurrentConnections = document.getElementById('valory').value
                socket.emit('admin-valor-y', maxConcurrentConnections)
            }
*/
        </script>
    </body>
</html>