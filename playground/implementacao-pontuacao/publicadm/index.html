<html>
    <head>
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        <meta charset="utf-8">
        <title></title>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <style>
        body {
            margin: 40px 0 0 0;
            padding: 0;
            background-color: #EEE;
            text-align: center;
        }
        </style>
    <body>
    <script src="/socket.io/socket.io.js"></script>  
            <div id="admin">
                <div>
                    <input type="text" value="X" id="valorx"><br>
                    <button type="button" onclick="eventox()">Emite um socket com o valor X para o server</button><br>
                    <button type="button" onclick="parareventox()">Parar evento X</button>
                </div> 
                <br></br>

                <br>
                <div>
                    <button type="button" onclick="eventok()">Comecar evento K</button><br>
                    <button type="button" onclick="parareventok()">Parar evento K</button><br>
                </div>
<br></br>
                <br>
                <div>
                    <input type="text" value="USUARIO" id="usuario"><br>
                    <input type="text" value="SENHA" id="senha"><br>
                    <button type="button" onclick="login()">Clique para fazer login</button><br>
                </div>
<br></br>
                <br>
                <div>
                    <input type="text" value="coloque um valor Y" id="valory"><br>
                    <button type="button" onclick="sety()">Enviar Y para o server</button><br>
                </div> 
    
            </div>
    </div>
        <script>
            const socket = io()
            let game
            //const scoreTable = document.getElementById('score-table')
            //const gameCanvas = document.getElementById('game-canvas')
            //let totalPlayersCount = ''
            //const collectFruitAudio = new Audio('collect.mp3')
            //const collect100FruitAudio = new Audio('100-collect.mp3')
            
            socket.on('connect', () => {
                const playerId = socket.id
                console.log('> Connected to server (id: ' + socket.id )
            })
            function eventox() {
                let valor = document.getElementById("valorx").value;
                socket.emit('mudar-dolar-adm', valor)
                }
            function login() {
                let valor1 = document.getElementById("usuario").value
                let valor2 = document.getElementById("senha").value
                let valor = [valor1, valor2]
                socket.emit('login-adm', valor)
                document.getElementById("usuario").value = ''
                document.getElementById("senha").value = ''

            }
            function eventok() {
                socket.emit('lazer')
            }
            function parareventok() {
                socket.emit('nlazer')
            }
            socket.on('login-negado', (id) => {
                alert('login_negado (para o id de conexao: ' + id + ')')
            })
            socket.on('acesso-negado', (id) => {
                alert('acesso negado (para o id de conexao: ' + id + ') FACA LOGIN!')
            })
            socket.on('alerta', (alerta) => {
                alert(alerta)
            })

            socket.on('disconnect', () => {
                console.log('> Disconnected')
                
            })
            /*
            socket.on('player-update', (player) => {
                game.players[player.socketId] = player.newState
            })

            socket.on('update-player-score', (score) => {
                game.players[socket.id].score = score
                updateScoreTable()
            })

            socket.on('player-remove', (socketId) => {
                delete game.players[socketId]
            })

            socket.on('fruit-add', (fruit) => {
                game.fruits[fruit.fruitId] = {
                    x: fruit.x,
                    y: fruit.y
                }
            })

            socket.on('fruit-remove', ({fruitId, score}) => {
                delete game.fruits[fruitId]
                multipleOf100Remainder = score % 100

                if (multipleOf100Remainder !== 0) {
                    collectFruitAudio.pause()
                    collectFruitAudio.currentTime = 0
                    collectFruitAudio.play().catch(console.log)
                }

                if (multipleOf100Remainder === 0 && score !== 0) {
                    collectFruitAudio.pause()
                    collect100FruitAudio.pause()
                    collect100FruitAudio.currentTime = 0
                    collect100FruitAudio.play().catch(console.log)
                }

                updateScoreTable()
            })

            socket.on('concurrent-connections', (concurrentConnections) => {
                totalPlayersCount = concurrentConnections
                updateScoreTable()
            })

            let crazyModeInterval
            socket.on('start-crazy-mode', () => {
                crazyModeInterval = setInterval(() => {
                    const randomKey = 37 + Math.floor(Math.random()*4)
                    console.log(randomKey)
                    const event = new KeyboardEvent('keydown', {
                        keyCode: randomKey,
                        which: randomKey
                    })

                    document.dispatchEvent(event);
                }, 150)
            })

            socket.on('stop-crazy-mode', () => {
                clearInterval(crazyModeInterval)
            })
            */
            //document.addEventListener('keydown', throttledKeydown)

            /* ADMIN */

            /*
            function eventox() {
                const interval = document.getElementById('valorx').value
                console.log(interval)
                socket.emit('admin-start-fruit-game', interval)
            }

            function parareventox() {
                socket.emit('admin-stop-fruit-game')
            }

            function eventok() {
                socket.emit('admin-start-crazy-mode')
            }

            function parareventok() {
                socket.emit('admin-stop-crazy-mode')
            }

            function login() {
                let user = promt('seu usuario:')
                let senha = prompt('sua senha:')
                let credenciais = [user, senha]
                socket.emit('admin-clear-scores', credenciais)
            }

            function sety() {
                const maxConcurrentConnections = document.getElementById('valory').value
                socket.emit('admin-valor-y', maxConcurrentConnections)
            }
*/
        </script>
    </body>
</html>