<html>
    <head>
        <meta charset="utf-8">
        <title></title>

        <style>
            body {
                margin: 40px 0 0 0;
                padding: 0;
                background-color: #EEE;
                text-align: center;
            }

           </style>
        <div>
            <input type="text" value="X" id="valorx"><br>
            <button type="button" onclick="eventox()">Emite um socket com o valor X para o server</button><br>
            <button type="button" onclick="parareventox()">Parar evento X</button>
        </div> 
        <br></br>

        <br>
        <div>
            <button type="button" onclick="eventok()">Comecar evento K</button><br>
            <button type="button" onclick="parareventok()">Parar evento K</button><br>
        </div>
<br></br>
        <br>
        <div>
            <input type="text" value="USUARIO" id="usuario"><br>
            <input type="text" value="SENHA" id="senha"><br>
            <button type="button" onclick="login()">Clique para fazer login</button><br>
        </div>
<br></br>
        <br>
        <div>
            <input type="text" value="coloque um valor Y" id="valory"><br>
            <button type="button" onclick="sety()">Enviar Y para o server</button><br>
        </div> 

    </div>
</div>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>

        <script>
            //se o <script n estiver com o type="module" o index.html fica incapaz de puxar os dados dos imports requisitados
        
            const socket = io()
            socket.on('connect', () => {
                const playerId = socket.id
                // console.log(`Player connected on Client with id: ${playerId}`)
                // console.log('socket', socket)

                //const screen = document.getElementById('screen')
                //const scoreTable = document.getElementById('score-table')
                
                //setupScreen(screen, game)
                //renderScreen(screen, scoreTable, game, requestAnimationFrame, playerId)
            })

            socket.on('disconnect', () => {
                //console.log('Unsubscribing All')
                //keyboardListener.unsubscribeAll();
            })

            socket.on('setup', (state) => {
                
            })
            socket.on('login-negado', (cre) => {
                alert('login negado para tentativa de conexao com '+cre)
            })
            socket.on('acesso-negado', () => {
                alert('Realize login para efetuar essa operacao')
            })
            socket.on('ja-conectado', (idd) => {alert('Voce ja esta conectado ' + idd)})
            socket.on('login-aprovado', (cre) => {
                alert('login aprovado para ' + cre)
            })
            function eventox() {
                let valor = document.getElementById("valorx").value;
                socket.emit('porcentagem-comissao', valor)
                }
            function eventok() {
                socket.emit('alterar-porcetagem-comissao', 43)
            }
            function login() {
                let valor1 = document.getElementById("usuario").value
                let valor2 = document.getElementById("senha").value
                let valor = [valor1, valor2]
                socket.emit('login-client', valor)
                document.getElementById("usuario").value = ''
                document.getElementById("senha").value = ''

            }

            socket.on('add-player', (command) => { //ouvindo esse comando o frontend vai rodar addPlayer(command) em tds os clients conectados
                // console.log(`Receiving ${command.type} -> ${command.playerId}`)
                
            })

            socket.on('remove-player', (command) => {
                // console.log(`Receiving ${command.type} -> ${command.playerId}`)
                game.removePlayer(command)
            })

            socket.on('move-player', (command) => {
                // console.log(`Receiving ${command.type} -> ${command.playerId}`)

                const playerId = socket.id

                if (playerId !== command.playerId) {
                    game.movePlayer(command)
                }
            })

            socket.on('add-fruit', (command) => {
                // console.log(`Receiving ${command.type} -> ${command.fruitId}`)
                game.addFruit(command)
            })

            socket.on('remove-fruit', (command) => {
                // console.log(`Receiving ${command.type} -> ${command.fruitId}`)
                game.removeFruit(command)
            })
        </script>
    </body>
</html>