<html>
    <head>
        <meta charset="utf-8">
        <title></title>

        <style>
            table, td {
            
  border: 2px solid black;

}
            body {
                margin: 40px 0 0 0;
                padding: 0;
                background-color: #EEE;
                text-align: center;
                
            }
            
            #valorx {
                position: absolute;
                top: 25px;
                left: 350px;
            }
            #cx {
                position: absolute;
                top: 400px;
                left: 350px;
            }
            #fx {
                position: absolute;
                top: 75px;
                left: 350px;
            }
            #ck {
                position: absolute;
                top: 300px;
                left: 350px;

            }
            #fk {
                position: absolute;
                top: 350px;
                left: 350px;
            }
            #usuario {
                position: absolute;
                top: 700px;
                left: 350px;
            }
            #senha {
                position: absolute;
                top: 725px;
                left: 350px;
            }
            #bsenha { 
                position: absolute;
                top: 750px;
                left: 350px;
            }
            #valory {
                position: absolute;
                top: 225px;
                left: 350px;
            }
            #by {
                position: absolute;
                top: 250px;
                left: 350px;
            }
            #bsend {
                position: absolute;
                top: 650px;
                left: 350px;
            }

           </style>
           <table id="myTable">
            <tr>
              <td>Servicos</td>
              <td>Insumos</td>
              <td>Preco de Venda</td>
            </tr>
            <tr>
                <td>147</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>148</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>149</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>157</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>158</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>159</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>257</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>258</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>259</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>267</td>
                <td>null</td>
                <td>null</td>
            </tr>
            <tr>
                <td>268</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>269</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>347</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>348</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>349</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>357</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>358</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>359</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>367</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>368</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>369</td>
                <td>nll</td>
                <td>null</td>
            </tr>
            <tr>
                <td>Caixa</td>
                <td>Frota</td>
                <td>Promotores</td>
            </tr>
            <tr>
                <td>6000</td>
                <td>2000</td>
                <td>200</td>
            </tr>
            <tr>
                <td>Comissao</td>
                <td>Distribuidores</td>
                <td>Turno</td>
            </tr>
            <tr>
                <td>5%</td>
                <td>350</td>
                <td>2</td>
            </tr>
            <tr>
                <td>PAS</td>
                <td>Depreciacao Frota</td>
                
            </tr>
            <tr>
                <td>30</td>
                <td>60%</td>
                
            </tr>
          </table>
          
          
        <div>
            <button type="button" id="cx" onclick="eventox()">Pesquisar quais modelos de servico sao oferecidos pela concorrencia</button>
        </div> 
    

        
        <div>
            <button type="button" id="ck" onclick="eventok()">Pesquisar quantitade de PAS da concorrencia</button>
            <button type="button" id="fk" onclick="parareventok()">Pesquisar quantitade de distribuidores da concorrencia</button>
        </div>
        <div>
            <input type="text" value="Exemplo: 147 ou 147, 257" id="valory">
            <button type="button" id="by" onclick="sety()">Pesquisar a participacao de um ou dois modelos de servico</button>
        </div> 
        <div>
            <input type="text" value="USUARIO" id="usuario">
            <input type="text" value="SENHA" id="senha">
            <button type="button" id="bsenha" onclick="login()">Clique para fazer login</button>
        </div>
        <button type="button" id="bsend" onclick="send()">Clique aqui para finalizar suas escolhas do turno</button>

    </div>
</div>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>

        <script>
            let duplo = 0
            function tabela(dados) {
            var table = document.getElementById("myTable");
            //var row = table.insertRow(0);
            while(duplo == 0){
            for(let i = 0; i < dados.length - 6; i++){
                
                table.rows[i+1].cells[1].innerHTML = dados[i][0];
                if(dados[i][1] == 1){
                    table.rows[i+1].cells[0].style.backgroundColor = "green";
                }
                //table.rows[i+1].cells[2].innerHTML = dados[i][1];
                //table.rows[i+1].cells[2].innerHTML = dados[i][2];
                table.rows[i+1].cells[0].addEventListener('click', function(i){
                    alert(i +" fazer algo")
            })
                table.rows[i+1].cells[1].addEventListener('click', function(i){
                    alert(i+ " fazer outro algo")
            })  
                table.rows[i+1].cells[2].addEventListener('click', function(i){
                    alert(i+ " fzer mais algum algo")
            })
                
            }
            table.rows[23].cells[0].innerHTML = dados[21]//
            table.rows[22].cells[0].style.backgroundColor = "gray"
            table.rows[25].cells[0].innerHTML = dados[24]//
            table.rows[24].cells[0].style.backgroundColor = "gray"
            table.rows[27].cells[0].innerHTML = dados[26]//
            table.rows[26].cells[0].style.backgroundColor = "gray"
            table.rows[23].cells[1].innerHTML = dados[22]
            table.rows[22].cells[1].style.backgroundColor = "gray"
            table.rows[25].cells[1].innerHTML = dados[25]
            table.rows[24].cells[1].style.backgroundColor = "gray"
            table.rows[23].cells[2].innerHTML = dados[23]
            table.rows[22].cells[2].style.backgroundColor = "gray"

            

            duplo = duplo + 1
        }
            
            
}



            //se o <script n estiver com o type="module" o index.html fica incapaz de puxar os dados dos imports requisitados
        
            const socket = io()
            socket.on('connect', () => {
                const playerId = socket.id
                // console.log(`Player connected on Client with id: ${playerId}`)
                // console.log('socket', socket)

                //const screen = document.getElementById('screen')
                //const scoreTable = document.getElementById('score-table')
                
                //setupScreen(screen, game)
                //renderScreen(screen, scoreTable, game, requestAnimationFrame, playerId)
            })

            socket.on('disconnect', () => {
                //console.log('Unsubscribing All')
                //keyboardListener.unsubscribeAll();
            })
            socket.on('dados-servicos', (dados) => {
                tabela(dados)
            })
            function send() {
        alert('Operacao Negada')
    }
            socket.on('setup', (state) => {
                
            })
            socket.on('login-negado', (cre) => {
                alert('login negado para tentativa de conexao com '+cre)
            })
            socket.on('acesso-negado', () => {
                alert('Realize login para efetuar essa operacao')
            })
            socket.on('ja-conectado', (idd) => {alert('Voce ja esta conectado ' + idd)})
            socket.on('login-aprovado', (cre) => {
                alert('login aprovado para ' + cre)
            })
            function eventox() {
                let valor = document.getElementById("valorx").value;
                socket.emit('porcentagem-comissao', valor)
                }
            function eventok() {
                socket.emit('alterar-porcetagem-comissao', 43)
            }
            function login() {
                let valor1 = document.getElementById("usuario").value
                let valor2 = document.getElementById("senha").value
                let valor = [valor1, valor2]
                socket.emit('login-client', valor)
                document.getElementById("usuario").value = ''
                document.getElementById("senha").value = ''

            }

            socket.on('add-player', (command) => { //ouvindo esse comando o frontend vai rodar addPlayer(command) em tds os clients conectados
                // console.log(`Receiving ${command.type} -> ${command.playerId}`)
                
            })

            socket.on('remove-player', (command) => {
                // console.log(`Receiving ${command.type} -> ${command.playerId}`)
                game.removePlayer(command)
            })

            socket.on('move-player', (command) => {
                // console.log(`Receiving ${command.type} -> ${command.playerId}`)

                const playerId = socket.id

                if (playerId !== command.playerId) {
                    game.movePlayer(command)
                }
            })

            socket.on('add-fruit', (command) => {
                // console.log(`Receiving ${command.type} -> ${command.fruitId}`)
                game.addFruit(command)
            })

            socket.on('remove-fruit', (command) => {
                // console.log(`Receiving ${command.type} -> ${command.fruitId}`)
                game.removeFruit(command)
            })
        </script>
    </body>
</html>